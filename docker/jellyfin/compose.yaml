services:
    jellyfin:
        image: jellyfin/jellyfin
        container_name: jellyfin
        ports:
            - ${JELLYFIN_HTTP_PORT}:8096/tcp
            - ${JELLYFIN_UDP_PORT}:7359/udp
        volumes:
            - ${JELLYFIN_CONFIG_PATH}:/config
            - ${JELLYFIN_CACHE_PATH}:/cache
            - type: bind
              source: ${JELLYFIN_MEDIA_PATH}
              target: /media
        restart: "unless-stopped"
        # Optional - alternative address used for autodiscovery
        environment:
            - JELLYFIN_PublishedServerUrl=${JELLYFIN_PUBLISHED_SERVER_URL}
        # Optional - may be necessary for docker healthcheck to pass if running in host network mode
        extra_hosts:
            - "host.docker.internal:host-gateway"
        networks:
            - newt_network

networks:
    newt_network:
        external: true
